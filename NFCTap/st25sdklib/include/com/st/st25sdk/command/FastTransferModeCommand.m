//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: st25sdk_ios/command/FastTransferModeCommand.java
//

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "com/st/st25sdk/Helper.h"
#include "com/st/st25sdk/STException.h"
#include "com/st/st25sdk/command/FastTransferModeCommand.h"
#include "com/st/st25sdk/command/Iso15693CustomCommand.h"
#include "java/util/Arrays.h"

@interface ComStSt25sdkCommandFastTransferModeCommand ()

- (jbyte)computeMsgLengthParamWithInt:(jint)size;

@end

__attribute__((unused)) static jbyte ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(ComStSt25sdkCommandFastTransferModeCommand *self, jint size);

@implementation ComStSt25sdkCommandFastTransferModeCommand

- (instancetype)initWithComStSt25sdkCommandIso15693CustomCommand:(ComStSt25sdkCommandIso15693CustomCommand *)cmd
                                                   withByteArray:(IOSByteArray *)uid
                                                         withInt:(jint)mailboxSize {
  ComStSt25sdkCommandFastTransferModeCommand_initWithComStSt25sdkCommandIso15693CustomCommand_withByteArray_withInt_(self, cmd, uid, mailboxSize);
  return self;
}

- (jbyte)writeMailboxMessageWithByteArray:(IOSByteArray *)buffer {
  if (buffer == nil) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  return [self writeMailboxMessageWithInt:buffer->size_ withByteArray:buffer];
}

- (jbyte)writeMailboxMessageWithInt:(jint)size
                      withByteArray:(IOSByteArray *)buffer {
  return [self writeMailboxMessageWithInt:size withByteArray:buffer withByte:[((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) getFlag]];
}

- (jbyte)writeMailboxMessageWithInt:(jint)size
                      withByteArray:(IOSByteArray *)buffer
                           withByte:(jbyte)flag {
  if (size < 1 || size > mMailboxSize_) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  if (buffer == nil || buffer->size_ < size) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  return [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) writeMsgWithByte:(jbyte) (size - 1) withByteArray:JavaUtilArrays_copyOfWithByteArray_withInt_(buffer, size) withByte:flag withByteArray:mUid_];
}

- (IOSByteArray *)readMailboxMessageWithInt:(jint)mbAddress
                                    withInt:(jint)size {
  return [self readMailboxMessageWithInt:mbAddress withInt:size withByte:[((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) getFlag]];
}

- (IOSByteArray *)readMailboxMessageWithInt:(jint)mbAddress
                                    withInt:(jint)size
                                   withByte:(jbyte)flag {
  if (mbAddress < 0 || mbAddress >= mMailboxSize_ - 1) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  if (size < 0 || size > mMailboxSize_) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  if (size == 1 && mbAddress == 0) {
    if ([self readMailboxMessageLength] > 0) {
      IOSByteArray *response = [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) readMsgWithByte:(jbyte) mbAddress withByte:ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(self, 2) withByte:flag withByteArray:mUid_];
      return JavaUtilArrays_copyOfWithByteArray_withInt_(response, 2);
    }
  }
  return [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) readMsgWithByte:(jbyte) mbAddress withByte:ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(self, size) withByte:flag withByteArray:mUid_];
}

- (jint)readMailboxMessageLength {
  IOSByteArray *response = [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) readMsgLength];
  if (((IOSByteArray *) nil_chk(response))->size_ < 2) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_withByteArray_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, CMD_FAILED), response);
  }
  return (ComStSt25sdkHelper_convertByteToUnsignedIntWithByte_(IOSByteArray_Get(response, 1)) + 1);
}

- (jbyte)fastWriteMailboxMessageWithByteArray:(IOSByteArray *)buffer {
  if (buffer == nil) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  return [self fastWriteMailboxMessageWithInt:buffer->size_ withByteArray:buffer];
}

- (jbyte)fastWriteMailboxMessageWithInt:(jint)size
                          withByteArray:(IOSByteArray *)buffer {
  return [self fastWriteMailboxMessageWithInt:size withByteArray:buffer withByte:[((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) getFlag]];
}

- (jbyte)fastWriteMailboxMessageWithInt:(jint)size
                          withByteArray:(IOSByteArray *)buffer
                               withByte:(jbyte)flag {
  if (size < 1 || size > mMailboxSize_) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  if ((buffer == nil) || (((IOSByteArray *) nil_chk(buffer))->size_ < size)) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  return [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) fastWriteMsgWithByte:(jbyte) (size - 1) withByteArray:JavaUtilArrays_copyOfWithByteArray_withInt_(buffer, size) withByte:flag withByteArray:mUid_];
}

- (IOSByteArray *)fastReadMailboxMessageWithInt:(jint)mbAddress
                                        withInt:(jint)size {
  return [self fastReadMailboxMessageWithInt:mbAddress withInt:size withByte:[((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) getFlag]];
}

- (IOSByteArray *)fastReadMailboxMessageWithInt:(jint)mbAddress
                                        withInt:(jint)size
                                       withByte:(jbyte)flag {
  if (mbAddress < 0 || mbAddress >= mMailboxSize_ - 1) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  if (size < 0 || size >= mMailboxSize_) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, BAD_PARAMETER));
  }
  if (size == 1 && mbAddress == 0) {
    if ([self readMailboxMessageLength] > 0) {
      IOSByteArray *response = [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) fastReadMsgWithByte:(jbyte) mbAddress withByte:ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(self, 2) withByte:flag withByteArray:mUid_];
      return JavaUtilArrays_copyOfWithByteArray_withInt_(response, 2);
    }
  }
  return [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) fastReadMsgWithByte:(jbyte) mbAddress withByte:ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(self, size) withByte:flag withByteArray:mUid_];
}

- (jint)fastReadMailboxMessageLength {
  IOSByteArray *response = [((ComStSt25sdkCommandIso15693CustomCommand *) nil_chk(mIso15693CustomCommand_)) fastReadMsgLength];
  if (((IOSByteArray *) nil_chk(response))->size_ < 2) {
    @throw new_ComStSt25sdkSTException_initWithComStSt25sdkSTException_STExceptionCode_withByteArray_(JreLoadEnum(ComStSt25sdkSTException_STExceptionCode, CMD_FAILED), response);
  }
  return (ComStSt25sdkHelper_convertByteToUnsignedIntWithByte_(IOSByteArray_Get(response, 1)) + 1);
}

- (jbyte)computeMsgLengthParamWithInt:(jint)size {
  return ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(self, size);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "B", 0x1, 1, 2, 3, -1, -1, -1 },
    { NULL, "B", 0x1, 1, 4, 3, -1, -1, -1 },
    { NULL, "B", 0x1, 1, 5, 3, -1, -1, -1 },
    { NULL, "[B", 0x1, 6, 7, 3, -1, -1, -1 },
    { NULL, "[B", 0x1, 6, 8, 3, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, 3, -1, -1, -1 },
    { NULL, "B", 0x1, 9, 2, 3, -1, -1, -1 },
    { NULL, "B", 0x1, 9, 4, 3, -1, -1, -1 },
    { NULL, "B", 0x1, 9, 5, 3, -1, -1, -1 },
    { NULL, "[B", 0x1, 10, 7, 3, -1, -1, -1 },
    { NULL, "[B", 0x1, 10, 8, 3, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, 3, -1, -1, -1 },
    { NULL, "B", 0x2, 11, 12, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithComStSt25sdkCommandIso15693CustomCommand:withByteArray:withInt:);
  methods[1].selector = @selector(writeMailboxMessageWithByteArray:);
  methods[2].selector = @selector(writeMailboxMessageWithInt:withByteArray:);
  methods[3].selector = @selector(writeMailboxMessageWithInt:withByteArray:withByte:);
  methods[4].selector = @selector(readMailboxMessageWithInt:withInt:);
  methods[5].selector = @selector(readMailboxMessageWithInt:withInt:withByte:);
  methods[6].selector = @selector(readMailboxMessageLength);
  methods[7].selector = @selector(fastWriteMailboxMessageWithByteArray:);
  methods[8].selector = @selector(fastWriteMailboxMessageWithInt:withByteArray:);
  methods[9].selector = @selector(fastWriteMailboxMessageWithInt:withByteArray:withByte:);
  methods[10].selector = @selector(fastReadMailboxMessageWithInt:withInt:);
  methods[11].selector = @selector(fastReadMailboxMessageWithInt:withInt:withByte:);
  methods[12].selector = @selector(fastReadMailboxMessageLength);
  methods[13].selector = @selector(computeMsgLengthParamWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "mIso15693CustomCommand_", "LComStSt25sdkCommandIso15693CustomCommand;", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "mUid_", "[B", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
    { "mMailboxSize_", "I", .constantValue.asLong = 0, 0x14, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LComStSt25sdkCommandIso15693CustomCommand;[BI", "writeMailboxMessage", "[B", "LComStSt25sdkSTException;", "I[B", "I[BB", "readMailboxMessage", "II", "IIB", "fastWriteMailboxMessage", "fastReadMailboxMessage", "computeMsgLengthParam", "I" };
  static const J2ObjcClassInfo _ComStSt25sdkCommandFastTransferModeCommand = { "FastTransferModeCommand", "com.st.st25sdk.command", ptrTable, methods, fields, 7, 0x1, 14, 3, -1, -1, -1, -1, -1 };
  return &_ComStSt25sdkCommandFastTransferModeCommand;
}

@end

void ComStSt25sdkCommandFastTransferModeCommand_initWithComStSt25sdkCommandIso15693CustomCommand_withByteArray_withInt_(ComStSt25sdkCommandFastTransferModeCommand *self, ComStSt25sdkCommandIso15693CustomCommand *cmd, IOSByteArray *uid, jint mailboxSize) {
  NSObject_init(self);
  self->mIso15693CustomCommand_ = cmd;
  self->mUid_ = JavaUtilArrays_copyOfWithByteArray_withInt_(uid, ((IOSByteArray *) nil_chk(uid))->size_);
  self->mMailboxSize_ = mailboxSize;
}

ComStSt25sdkCommandFastTransferModeCommand *new_ComStSt25sdkCommandFastTransferModeCommand_initWithComStSt25sdkCommandIso15693CustomCommand_withByteArray_withInt_(ComStSt25sdkCommandIso15693CustomCommand *cmd, IOSByteArray *uid, jint mailboxSize) {
  J2OBJC_NEW_IMPL(ComStSt25sdkCommandFastTransferModeCommand, initWithComStSt25sdkCommandIso15693CustomCommand_withByteArray_withInt_, cmd, uid, mailboxSize)
}

ComStSt25sdkCommandFastTransferModeCommand *create_ComStSt25sdkCommandFastTransferModeCommand_initWithComStSt25sdkCommandIso15693CustomCommand_withByteArray_withInt_(ComStSt25sdkCommandIso15693CustomCommand *cmd, IOSByteArray *uid, jint mailboxSize) {
  J2OBJC_CREATE_IMPL(ComStSt25sdkCommandFastTransferModeCommand, initWithComStSt25sdkCommandIso15693CustomCommand_withByteArray_withInt_, cmd, uid, mailboxSize)
}

jbyte ComStSt25sdkCommandFastTransferModeCommand_computeMsgLengthParamWithInt_(ComStSt25sdkCommandFastTransferModeCommand *self, jint size) {
  jbyte length = 0;
  if (size > 0) {
    length = (jbyte) (size - 1);
  }
  return length;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComStSt25sdkCommandFastTransferModeCommand)
